<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Household Goods Should Cost Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="page-nav" role="navigation" aria-label="Main navigation">
            <a href="/" class="nav-link active" aria-current="page">üìä Single Calculator</a>
            <a href="/bulk" class="nav-link">üìÅ Bulk Upload</a>
        </nav>

        <h1>üè° Household Goods Should Cost Calculator</h1>
        <p class="subtitle">Calculate estimated moving costs based on origin, destination, and service requirements</p>

        <form id="calculatorForm">
            <!-- Advanced Settings Toggle -->
            <div class="settings-toggle" onclick="toggleSettings()" role="button" tabindex="0" aria-expanded="false" aria-controls="advancedSettings">
                <h3>‚öôÔ∏è Advanced Rate Settings</h3>
                <span class="toggle-icon" id="toggleIcon">‚ñº</span>
            </div>

            <div class="settings-content" id="advancedSettings" aria-label="Advanced Settings">
                <div style="padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; margin-bottom: 15px; border-radius: 4px;">
                    <strong>‚ÑπÔ∏è What these settings mean:</strong>
                    <ul style="margin: 10px 0 0 20px; line-height: 1.8;">
                        <li><strong>Percentages (%):</strong> Service multipliers applied to base cost (100% = no change, 135% = +35% markup)</li>
                        <li><strong>Insurance ($):</strong> Dollar amount charged per 1,000 lbs of household goods</li>
                        <li><strong>Fuel Surcharge (%):</strong> Percentage of regional cost added to cover fuel expenses</li>
                        <li><strong>Minimum Charge ($):</strong> Lowest amount charged, even if calculation is less</li>
                    </ul>
                </div>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="selfPackRate">Self Pack Rate (%) *</label>
                        <input type="number" id="selfPackRate" value="100" min="50" max="200" step="5" aria-describedby="selfPackHelp">
                        <p class="info-text" id="selfPackHelp">Baseline rate when customer packs their own items (100% = no markup)</p>
                    </div>
                    <div class="setting-item">
                        <label for="partialPackRate">Partial Pack Rate (%) *</label>
                        <input type="number" id="partialPackRate" value="115" min="50" max="200" step="5" aria-describedby="partialPackHelp">
                        <p class="info-text" id="partialPackHelp">Multiplier when we pack some items (115% = +15% cost increase)</p>
                    </div>
                    <div class="setting-item">
                        <label for="fullPackRate">Full Pack Rate (%) *</label>
                        <input type="number" id="fullPackRate" value="135" min="50" max="200" step="5" aria-describedby="fullPackHelp">
                        <p class="info-text" id="fullPackHelp">Multiplier when we pack everything (135% = +35% cost increase)</p>
                    </div>
                    <div class="setting-item">
                        <label for="noStorageRate">No Storage Rate (%) *</label>
                        <input type="number" id="noStorageRate" value="100" min="50" max="200" step="5" aria-describedby="noStorageHelp">
                        <p class="info-text" id="noStorageHelp">Baseline when no storage needed (100% = no additional charge)</p>
                    </div>
                    <div class="setting-item">
                        <label for="storage30Rate">30 Days Storage (%) *</label>
                        <input type="number" id="storage30Rate" value="120" min="50" max="200" step="5" aria-describedby="storage30Help">
                        <p class="info-text" id="storage30Help">Multiplier for 30-day storage (120% = +20% cost increase)</p>
                    </div>
                    <div class="setting-item">
                        <label for="storage60Rate">60 Days Storage (%) *</label>
                        <input type="number" id="storage60Rate" value="135" min="50" max="200" step="5" aria-describedby="storage60Help">
                        <p class="info-text" id="storage60Help">Multiplier for 60-day storage (135% = +35% cost increase)</p>
                    </div>
                    <div class="setting-item">
                        <label for="insuranceRate">Insurance per $1000 lbs ($) *</label>
                        <input type="number" id="insuranceRate" value="5.00" min="1" max="50" step="0.50" aria-describedby="insuranceHelp">
                        <p class="info-text" id="insuranceHelp">Cost per 1,000 lbs of weight (e.g., 5,000 lbs √ó $5 = $25 insurance)</p>
                    </div>
                    <div class="setting-item">
                        <label for="fuelSurcharge">Fuel Surcharge (%) *</label>
                        <input type="number" id="fuelSurcharge" value="12" min="0" max="50" step="1" aria-describedby="fuelHelp">
                        <p class="info-text" id="fuelHelp">Percentage added to cover fuel costs (12% of regional cost)</p>
                    </div>
                    <div class="setting-item">
                        <label for="minimumCharge">Minimum Charge ($) *</label>
                        <input type="number" id="minimumCharge" value="500" min="0" max="2000" step="50" aria-describedby="minChargeHelp">
                        <p class="info-text" id="minChargeHelp">Minimum fee charged for any move, regardless of calculation</p>
                    </div>
                    <div class="setting-item">
                        <label for="discountRate">Discount (%) *</label>
                        <input type="number" id="discountRate" value="0" min="0" max="50" step="0.5" aria-describedby="discountHelp">
                        <p class="info-text" id="discountHelp">Percentage discount applied to subtotal (excludes fuel surcharge and tariffs)</p>
                    </div>
                </div>
                <button type="button" class="reset-btn" onclick="resetSettings()">Reset to Defaults</button>
            </div>

            <div class="form-section">
                <h2>Move Details</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="origin" class="required">Origin</label>
                        <input 
                            type="text" 
                            id="origin" 
                            name="origin" 
                            placeholder="City, State or ZIP Code"
                            required
                            aria-required="true"
                            aria-describedby="origin-help"
                        >
                        <p class="info-text" id="origin-help">Example: Bentonville, AR or 72712</p>
                    </div>

                    <div class="form-group">
                        <label for="destination" class="required">Destination</label>
                        <input 
                            type="text" 
                            id="destination" 
                            name="destination" 
                            placeholder="City, State or ZIP Code"
                            required
                            aria-required="true"
                            aria-describedby="destination-help"
                        >
                        <p class="info-text" id="destination-help">Example: Austin, TX or 78701</p>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="weight" class="required">Weight (pounds)</label>
                        <input 
                            type="number" 
                            id="weight" 
                            name="weight" 
                            placeholder="5000"
                            min="1"
                            required
                            aria-required="true"
                            aria-describedby="weight-help"
                        >
                        <p class="info-text" id="weight-help">Average 1-bedroom: 2,000 lbs | 3-bedroom: 9,000 lbs</p>
                    </div>

                    <div class="form-group">
                        <label for="distance">Distance (miles) - Optional</label>
                        <input 
                            type="number" 
                            id="distance" 
                            name="distance" 
                            placeholder="Auto-calculated"
                            min="1"
                            aria-describedby="distance-help"
                        >
                        <p class="info-text" id="distance-help">Leave blank to auto-calculate</p>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2>Service Options</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="packing">Packing Service</label>
                        <select id="packing" name="packing" aria-describedby="packing-help">
                            <option value="self_pack">Self Pack (No Service)</option>
                            <option value="partial_pack">Partial Pack (+15%)</option>
                            <option value="full_pack">Full Pack (+35%)</option>
                        </select>
                        <p class="info-text" id="packing-help">Select the level of packing assistance needed</p>
                    </div>

                    <div class="form-group">
                        <label for="storage">Storage Option</label>
                        <select id="storage" name="storage" aria-describedby="storage-help">
                            <option value="no_storage">No Storage</option>
                            <option value="storage_30days">30 Days Storage (+20%)</option>
                            <option value="storage_60days">60 Days Storage (+35%)</option>
                        </select>
                        <p class="info-text" id="storage-help">Select if temporary storage is needed</p>
                    </div>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input 
                            type="checkbox" 
                            id="insurance" 
                            name="insurance" 
                            checked
                            aria-describedby="insurance-help"
                        >
                        <label for="insurance">Include Insurance Coverage</label>
                    </div>
                    <p class="info-text" id="insurance-help">Recommended for valuable items ($5 per $1,000 of weight)</p>
                </div>
            </div>

            <button type="submit" id="calculateBtn">Calculate Should Cost</button>
        </form>

        <div class="error-message" id="errorMessage" role="alert" aria-live="polite"></div>

        <div class="results" id="results" role="region" aria-live="polite" aria-label="Calculation Results">
            <h2>Cost Estimate</h2>
            
            <div class="cost-summary">
                <div>Move: <strong id="routeSummary"></strong></div>
                <div>Distance: <strong id="distanceSummary"></strong> miles</div>
                <div>Weight: <strong id="weightSummary"></strong> lbs</div>
                <div class="total-cost" id="totalCost">$0.00</div>
            </div>

            <div class="breakdown">
                <h2 style="margin-bottom: 20px;">üìä Detailed Cost Breakdown</h2>
                <div id="breakdownDetails"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='calculator.js') }}"></script>
</body>
</html>